(this.webpackJsonpmymoney=this.webpackJsonpmymoney||[]).push([[0],{374:function(e,a,t){e.exports=t(702)},565:function(e,a,t){},566:function(e,a,t){},610:function(e,a,t){},624:function(e,a,t){},629:function(e,a,t){},693:function(e,a,t){},694:function(e,a,t){},695:function(e,a,t){},702:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(6),i=t.n(c),l=t(109),s=t(15),o=t(13),u=t(166),m=t(39),d=Object(l.b)({name:"search",initialState:"",reducers:{changeText:function(e,a){return a.payload}}}),f=d.actions.changeText,p=d.reducer,b=Object(m.combineReducers)({firestore:u.firestoreReducer,firebase:o.firebaseReducer,search:p}),E=(t(327),t(565),t(704)),h=t(55),v=t(75),O=t(24),y=t(716),g=(t(566),t(167)),j=t.n(g),w=(t(610),t(30)),k=t.n(w),_=t(356);var F=function(){Object(o.useFirestoreConnect)("users");var e=Object(s.c)((function(e){return e.firestore.data.users})),a=Object(s.c)((function(e){return e.firebase.auth}));if(!Object(o.isLoaded)(e))return r.a.createElement("div",{className:"spin"},r.a.createElement(_.a,null));var t=k.a.filter(e,(function(e){return e.uid===a.uid})),n=0;0!==t.length&&(n=t[0].total);var c={value:n,currency:{code:"RUR",minority:100}};return r.a.createElement("div",{className:"balans"},r.a.createElement("span",{className:"balans__info"},"\u0411\u0430\u043b\u0430\u043d\u0441"),r.a.createElement("span",{className:"balans__sum"},r.a.createElement(j.a,{size:"xl",amount:c,className:"balans__val",showZeroMinorPart:!0})))},x=E.a.Header;var C=function(){var e=Object(o.useFirebase)(),a=Object(s.c)((function(e){return e.firebase.auth})),t=Object(v.f)();return r.a.createElement(x,{className:"nav"},r.a.createElement("div",{className:"nav__row"},r.a.createElement(h.b,{to:"/",className:"logo"},"MyMoney"),a.uid?r.a.createElement(r.a.Fragment,null,r.a.createElement(F,null),r.a.createElement("div",{className:"nav__block"},r.a.createElement(O.a,{type:"link",icon:r.a.createElement(y.a,null),className:"nav__exit",onClick:function(){a.uid&&e.auth().signOut().then((function(){t.push("/signin")}))}},"\u0412\u044b\u0445\u043e\u0434"))):null))},N=t(708),I=(t(624),N.a.Search);var M=function(){var e=Object(s.b)();return r.a.createElement("div",{className:"searchbar"},r.a.createElement("span",{className:"searchbar__text"},"\u041f\u043e\u0438\u0441\u043a \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439:"),r.a.createElement(I,{placeholder:"\u043f\u043e \u0441\u0443\u043c\u043c\u0435, \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438, \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044e",onChange:function(a){return e(f(a.target.value.trim()))},className:"searchbar__input"}))},Y=t(88),S=t(25),P=t(705),L=t(712),q=t(706),D=t(726),R=t(727),T=t(720),z=(t(629),t(630),t(326)),A=t(89),V=t.n(A),U=t(707),B=t(709),W=t(710),H=t(711),J=t(373);var Z=function(e){var a=e.showModal,t=e.onOk,n=e.onCancel,c=e.initialValues,i=e.title,l=U.a.useForm(),s=Object(S.a)(l,1)[0];return r.a.createElement(B.a,{title:i,centered:!0,visible:a,onOk:function(){s.validateFields().then((function(e){s.resetFields(),t(e)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u0438:",e)}))},onCancel:n,cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430"},r.a.createElement(U.a,{form:s,labelCol:{span:5},wrapperCol:{span:19},layout:"horizontal",size:"middle",initialValues:c},r.a.createElement(U.a.Item,{name:"period",label:"\u0414\u0430\u0442\u0430",rules:[{required:!0,message:"\u0414\u0430\u0442\u0430 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430!"}]},r.a.createElement(W.a,{format:"DD.MM.YYYY",locale:J.a})),r.a.createElement(U.a.Item,{name:"category",label:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",rules:[{required:!0,message:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430!"}]},r.a.createElement(N.a,null)),r.a.createElement(U.a.Item,{name:"sum",label:"\u0421\u0443\u043c\u043c\u0430",rules:[{required:!0,message:"\u0421\u0443\u043c\u043c\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430!"}]},r.a.createElement(H.a,{precision:2})),r.a.createElement(U.a.Item,{name:"recipient",label:"\u041f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044c"},r.a.createElement(N.a,null))))};var K=function(e){var a=e.show,t=e.onShow,n=e.record,c=Object(o.useFirestore)(),i=Object(s.c)((function(e){return e.firebase.auth})),l={};null!==n&&(l={sum:n.sum/100,category:n.category,period:V()(n.period,"DD.MM.YYYY"),recipient:n.recipient});var u={showModal:a,onOk:function(e){var a=Object(Y.a)({},e,{period:V()(e.period).format("DD.MM.YYYY"),uid:i.uid,sum:100*e.sum});c.update("transactions/".concat(n.key),a),t()},onCancel:t,initialValues:l,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044e"};return r.a.createElement(Z,u)};var X=function(){var e=Object(n.useState)(!1),a=Object(S.a)(e,2),t=a[0],c=a[1],i=Object(n.useState)(null),l=Object(S.a)(i,2),u=l[0],m=l[1],d=Object(n.useState)(k.a.uniqueId()),f=Object(S.a)(d,2),p=f[0],b=f[1];Object(o.useFirestoreConnect)("transactions");var E=Object(s.c)((function(e){return e.firestore.data.transactions})),h=Object(s.c)((function(e){return e.firestore.data.users})),v=Object(s.c)((function(e){return e.search})),y=Object(s.c)((function(e){return e.firebase.auth})),g=Object(o.useFirestore)(),w=[{title:"\u0414\u0430\u0442\u0430",dataIndex:"period",sorter:{compare:function(e,a){return new Date(e.period)-new Date(a.period)},multiple:3}},{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",dataIndex:"category",sorter:{compare:function(e,a){var t=e.category.toLowerCase(),n=a.category.toLowerCase();return t<n?-1:t>n?1:0},multiple:2}},{title:"\u0421\u0443\u043c\u043c\u0430",dataIndex:"sum",sorter:{compare:function(e,a){return e.sum-a.sum},multiple:1},render:function(e){return r.a.createElement("div",{className:"list__sum"},r.a.createElement(j.a,{size:"s",amount:{value:e,currency:{code:"RUR",minority:100}},className:"",showZeroMinorPart:!0}))}},{title:"\u041f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044c",dataIndex:"recipient",sorter:{compare:function(e,a){var t=e.recipient.toLowerCase(),n=a.recipient.toLowerCase();return t<n?-1:t>n?1:0},multiple:4}},{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f",dataIndex:"action",render:function(e,a){return r.a.createElement("div",null,r.a.createElement(O.a,{type:"link",icon:r.a.createElement(D.a,null),onClick:function(){m(a),b(k.a.uniqueId()),c(!0)}}),r.a.createElement(P.a,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c?",onConfirm:function(){return g.delete("transactions/".concat(a.key))},cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",icon:r.a.createElement(R.a,{style:{color:"red"}})},r.a.createElement(O.a,{type:"link",icon:r.a.createElement(T.a,null)})))}}],F={show:t,onShow:function(){return c(!1)}};if(!Object(o.isLoaded)(E))return r.a.createElement("div",{className:"spin"},r.a.createElement(_.a,null));if(Object(o.isEmpty)(E))return r.a.createElement("div",{className:"list__spin"},r.a.createElement(L.a,{message:"\u0421\u043f\u0438\u0441\u043e\u043a \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439 \u043f\u0443\u0441\u0442",type:"error"}));var x=function(){return y.uid},C=Object(z.a)([x,function(e){return k()(e).map((function(e,a){return Object(Y.a)({},e,{key:a})})).sortBy("period").reverse().value()}],(function(e,a){return k.a.filter(a,(function(a){return a.uid===e}))})),N=Object(z.a)([function(){return v},C],(function(e,a){if(""===e)return a;var t=e.toLowerCase(),n=k.a.filter(a,(function(e){return-1!==e.category.toLowerCase().indexOf(t)})),r=k.a.filter(a,(function(e){return-1!==Math.trunc(e.sum/100).toString().indexOf(t)})),c=k.a.filter(a,(function(e){return-1!==e.recipient.toLowerCase().indexOf(t)}));return k.a.unionWith(n,r,c,k.a.isEqual)}));return Object(z.a)([function(){var e=k()(h).map((function(e,a){return Object(Y.a)({},e,{key:a})})).filter((function(e){return e.uid===x()})).value();return 0!==e.length?e[0]:[]},C],(function(e,a){var t=k.a.reduce(a,(function(e,a){return e+a.sum}),0);return k.a.isEmpty(e)||t===e.total||g.update("users/".concat(e.key),{total:t}),t}))(E),r.a.createElement(r.a.Fragment,null,r.a.createElement(K,Object.assign({},F,{record:u,key:p})),r.a.createElement(q.a,{columns:w,dataSource:N(E),pagination:!1}))},G=t(728);var Q=function(e){var a=e.show,t=e.onShow,n=Object(o.useFirestore)(),c=Object(s.c)((function(e){return e.firebase.auth})),i={showModal:a,onOk:function(e){var a=Object(Y.a)({},e,{period:V()(e.period).format("DD.MM.YYYY"),uid:c.uid,sum:100*e.sum});n.add("transactions",a),t()},onCancel:t,initialValues:{sum:0,category:"",period:V()(),recipient:""},title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044e"};return r.a.createElement(Z,i)};var $=function(){var e=Object(n.useState)(!1),a=Object(S.a)(e,2),t=a[0],c=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,{show:t,onShow:function(){return c(!1)}}),r.a.createElement(O.a,{type:"primary",icon:r.a.createElement(G.a,null),onClick:function(){return c(!0)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044e"))};t(693);var ee=function(){var e=Object(s.c)((function(e){return e.firebase.auth})),a=Object(v.f)();return e.uid||a.push("/signin"),r.a.createElement("div",{className:"dashboard"},r.a.createElement("div",{className:"dashboard__block"},r.a.createElement($,null),r.a.createElement(M,null)),r.a.createElement(X,null))},ae=t(38),te=t.n(ae),ne=t(72),re=(t(694),{labelCol:{span:8},wrapperCol:{span:10}}),ce={wrapperCol:{offset:8,span:16}};var ie=function(){var e=Object(n.useState)(""),a=Object(S.a)(e,2),t=a[0],c=a[1],i=Object(s.c)((function(e){return e.firebase.auth})),l=Object(o.useFirebase)(),u=Object(v.f)(),m=function(){var e=Object(ne.a)(te.a.mark((function e(a){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.uid){e.next=3;break}return e.next=3,l.auth().signOut();case 3:return e.prev=3,e.next=6,l.auth().signInWithEmailAndPassword(a.email,a.password);case 6:return e.next=8,l.auth();case 8:c(""),u.push("/"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),c(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(a){return e.apply(this,arguments)}}();return Object(o.isLoaded)(i)?r.a.createElement("div",{className:"signin"},r.a.createElement(U.a,Object.assign({},re,{name:"basic",onFinish:m,onFinishFailed:function(e){console.log("Failed:",e)},className:"signin__form"}),r.a.createElement(U.a.Item,{label:"Email",name:"email",rules:[{type:"email",message:"\u0412\u0432\u0435\u0434\u0451\u043d\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u043c E-mail!"},{required:!0,message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0412\u0430\u0448 E-mail!!"}]},r.a.createElement(N.a,null)),r.a.createElement(U.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",rules:[{required:!0,message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0412\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c!"}]},r.a.createElement(N.a.Password,null)),r.a.createElement(U.a.Item,ce,r.a.createElement(O.a,{type:"primary",htmlType:"submit"},"\u0412\u0445\u043e\u0434"),r.a.createElement(O.a,{type:"link",htmlType:"button"},r.a.createElement(h.b,{to:"/signup"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))),t?r.a.createElement("div",{className:"alert"},r.a.createElement(L.a,{message:"\u041e\u0448\u0438\u0431\u043a\u0430",description:t,type:"error",showIcon:!0,closable:!0,onClose:function(){c("")}})):null)):r.a.createElement("div",{className:"spin spin__full"},r.a.createElement(_.a,null))},le=(t(695),{labelCol:{span:8},wrapperCol:{span:10}}),se={wrapperCol:{offset:8,span:16}};var oe=function(){var e=Object(n.useState)(""),a=Object(S.a)(e,2),t=a[0],c=a[1],i=Object(s.c)((function(e){return e.firebase.auth})),l=Object(o.useFirebase)(),u=Object(o.useFirestore)(),m=Object(v.f)(),d=function(){var e=Object(ne.a)(te.a.mark((function e(a){var t;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.uid){e.next=3;break}return e.next=3,l.auth().signOut();case 3:return e.prev=3,e.next=6,l.auth().createUserWithEmailAndPassword(a.email,a.password);case 6:return t=e.sent,e.next=9,u.add("users",{total:0,uid:t.user.uid});case 9:c(""),m.push("/"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),c(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(a){return e.apply(this,arguments)}}();return Object(o.isLoaded)(i)?r.a.createElement("div",{className:"signup"},r.a.createElement(U.a,Object.assign({},le,{name:"basic",onFinish:d,onFinishFailed:function(e){console.log("Failed:",e)},className:"signup__form"}),r.a.createElement(U.a.Item,{label:"Email",name:"email",rules:[{type:"email",message:"\u041d\u0435 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0439 E-mail!"},{required:!0,message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0412\u0430\u0448 E-mail!!"}]},r.a.createElement(N.a,null)),r.a.createElement(U.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",rules:[{required:!0,message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0412\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c!"}],hasFeedback:!0},r.a.createElement(N.a.Password,null)),r.a.createElement(U.a.Item,{name:"confirm",label:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u041f\u0430\u0440\u043e\u043b\u044c",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0412\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c!"},function(e){var a=e.getFieldValue;return{validator:function(e,t){return t&&a("password")!==t?Promise.reject(new Error("\u0414\u0432\u0430 \u043f\u0430\u0440\u043e\u043b\u044f, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432\u044b \u0432\u0432\u0435\u043b\u0438, \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442!")):Promise.resolve()}}}]},r.a.createElement(N.a.Password,null)),r.a.createElement(U.a.Item,se,r.a.createElement(O.a,{type:"primary",htmlType:"submit"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement(O.a,{type:"link",htmlType:"button"},r.a.createElement(h.b,{to:"/signin"},"\u0412\u0445\u043e\u0434"))),t?r.a.createElement("div",{className:"alert"},r.a.createElement(L.a,{message:"\u041e\u0448\u0438\u0431\u043a\u0430",description:t,type:"error",showIcon:!0,closable:!0,onClose:function(){c("")}})):null)):r.a.createElement("div",{className:"spin spin__full"},r.a.createElement(_.a,null))},ue=E.a.Content,me=E.a.Footer;var de=function(){return r.a.createElement(h.a,null,r.a.createElement(E.a,{className:"layout"},r.a.createElement(C,null),r.a.createElement(ue,{className:"site-layout content"},r.a.createElement("div",{className:"site-layout-background content__block"},r.a.createElement(v.c,null,r.a.createElement(v.a,{exact:!0,path:"/",component:ee}),r.a.createElement(v.a,{path:"/signin",component:ie}),r.a.createElement(v.a,{path:"/signup",component:oe})))),r.a.createElement(me,{style:{textAlign:"center"}},"MyMoney \xa92020 \u0421\u043e\u0437\u0434\u0430\u043b \u0413\u0440\u0435\u0431\u0435\u043d\u0451\u0432 \u041e\u043b\u0435\u0433")))},fe=t(176),pe=t.n(fe);t(696),t(700);pe.a.initializeApp({apiKey:"AIzaSyAEOYkMM2xYokEEFTHRmok_l1acX4_Pnn0",authDomain:"mymoney-94ccc.firebaseapp.com",databaseURL:"https://mymoney-94ccc.firebaseio.com",projectId:"mymoney-94ccc",storageBucket:"mymoney-94ccc.appspot.com",messagingSenderId:"129188174683",appId:"1:129188174683:web:f9211c3e2b6ab8feff987e"}),pe.a.firestore();var be=pe.a,Ee=Object(l.a)({reducer:b,middleware:Object(l.c)({serializableCheck:!1})}),he={firebase:be,config:{userProfile:"users",useFirestoreForProfile:!0},dispatch:Ee.dispatch,createFirestoreInstance:u.createFirestoreInstance};i.a.render(r.a.createElement(s.a,{store:Ee},r.a.createElement(o.ReactReduxFirebaseProvider,he,r.a.createElement(de,null))),document.getElementById("root"))}},[[374,1,2]]]);
//# sourceMappingURL=main.58dbf8a7.chunk.js.map